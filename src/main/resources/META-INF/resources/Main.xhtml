<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <style type="text/css">
        .color-red {
            background: coral;
        }
    </style>
    <title>Login page</title>
</h:head>

<h:body style="background-color: darkgray">

    <p:layout style="min-width:400px; min-height: 630px">
        <p:layoutUnit position="west" resizable="false" size="200" minSize="40"
                      maxSize="300" header="Menu bar" collapsible="true">
            <p:growl id="msgs" autoUpdate="true"/>
            <h:form>
                <div> Position west</div>
                <p:panelGrid columns="1">
                    <p:commandButton style="size: auto" value="Clients" id="nonAjax" update="msgs"
                                     action="#{mainPage.buttonClients()}" ajax="false"/>
                </p:panelGrid>
            </h:form>
        </p:layoutUnit>
        <p:layoutUnit position="north" resizable="false" collapsible="true" minSize="100" header="Info panel">

            <div>Some information</div>


        </p:layoutUnit>

        <p:layoutUnit position="center" header="Logining to Application">
            <h:form id="form1">
                <p:growl id="messages" showDetail="true"/>

                <h:panelGrid columnClasses="value">

                    <h3 style="margin-top: 0">Editable Schedule</h3>
                    <p:schedule id="schedule" value="#{mainPage.eventModel}" widgetVar="myschedule"
                                timeZone="GMT+2" locale="rs">

                        <p:ajax event="dateSelect" listener="#{mainPage.onDateSelect}" update="eventDetails"
                                oncomplete="PF('eventDialog').show();"/>
                        <p:ajax event="eventSelect" listener="#{mainPage.onEventSelect}" update="eventDetails"
                                oncomplete="PF('eventDialog').show();"/>
                        <p:ajax event="eventMove" listener="#{mainPage.onEventMove}" update="messages"/>
                        <p:ajax event="eventResize" listener="#{mainPage.onEventResize}" update="messages"/>
                    </p:schedule>
                </h:panelGrid>

                <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="blind"
                          dynamic="true">
                    <h:panelGrid id="eventDetails" columns="2">
                        <p:outputLabel value="Is client new:"/>
                        <p:inputSwitch id="isNew" value="#{mainPage.clientNew}" offLabel="No" onLabel="Yes"
                                       style="font-size: small">
                            <p:ajax oncomplete="PF('addClientDialog').show(); " update=":form1:clientSurname"/>
                        </p:inputSwitch>

                        <p:outputLabel value="Client surname:"/>
                        <p:selectOneMenu id="clientSurname" value="#{mainPage.event.localCustomer.surName}">
                            <f:selectItem itemLabel="Select One" itemValue=""/>
                            <f:selectItems value="#{mainPage.selectCustomer()}"/>
                            <p:ajax update=":form1:Clientphone, :form1:Clientname"
                                    listener="#{mainPage.setCustomerInfo}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="Client surname AUTOCOMPLETE:"/>
                        <p:autoComplete value="#{mainPage.mainPageCustomer}"
                                        completeMethod="#{mainPage.completeCustomer}"
                                        converter="#{customerConverter}" dynamic="true" forceSelection="true">
                            <p:ajax id="aj" listener="#{mainPage.setCustomerInfo()}"
                                    update=":form1:Clientphone, :form1:Clientname"/>
                        </p:autoComplete>

                        <p:outputLabel value="Client name:"/>
                        <p:inputText id="Clientname" value="#{mainPage.event.localCustomer.name}"/>

                        <p:outputLabel value="Client's phone numb:"/>
                        <p:inputText id="Clientphone" value="#{mainPage.event.localCustomer.telNumber}"
                                     required="true"/>

                        <p:outputLabel value="Chose procedure"/>
                        <p:selectOneMenu value="#{mainPage.event.title}">
                            <f:selectItem itemLabel="Select One" itemValue=""/>
                            <f:selectItems value="#{mainPage.selectTitleProcedure()}"/>
                            <p:ajax update=":form1:costProc, :form1:costActualProc"
                                    listener="#{mainPage.calculatePrise}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="Procedure NOMINAL cost"/>
                        <p:inputText id="costProc" value="#{mainPage.event.localVisit.procedure.cost}" required="true"/>

                        <p:outputLabel value="Procedure ACTUAL cost"/>
                        <p:inputText id="costActualProc" value="#{mainPage.event.localVisit.fanalPrice}"
                                     required="true"/>

                        <p:outputLabel value="Chose specialist:"/>
                        <p:selectOneMenu value="#{mainPage.selectedSpecialistId}">
                            <f:selectItem itemLabel="Select One" itemValue=""/>
                            <f:selectItems value="#{mainPage.selectSpecialist()}"/>
                        </p:selectOneMenu>


                        <p:outputLabel for="from" value="From:"/>
                        <p:calendar id="from" value="#{mainPage.event.startDate}"
                                    timeZone="GMT+2" pattern="dd/MM/yy HH:mm">
                            <p:ajax update=":form1:to" listener="#{mainPage.calculateEndDate}"/>
                        </p:calendar>

                        <p:outputLabel for="to" value="To:"/>
                        <p:calendar id="to" value="#{mainPage.event.endDate}"
                                    timeZone="GMT+2" pattern="dd/MM/yy HH:mm"/>

                        <p:outputLabel for="allDay" value="All Day:"/>
                        <h:selectBooleanCheckbox id="allDay" value="#{mainPage.event.allDay}"/>

                        <p:outputLabel value="Confirm visit (after payment):"/>
                        <p:inputSwitch value="#{mainPage.event.localVisit.payed}" offLabel="No" onLabel="Yes"
                                       style="font-size: small"/>

                        <p:commandButton type="reset" value="Reset" oncomplete="PF('eventDialog').reset();"/>
                        <p:commandButton id="addButton" value="Save" actionListener="#{mainPage.addEvent}"
                                         oncomplete="PF('myschedule').update(); PF('eventDialog').hide();"/>
                    </h:panelGrid>
                </p:dialog>
            </h:form>

            <h:form id="form2">
                <p:dialog widgetVar="addClientDialog" header="Add new Client Details" showEffect="clip"
                          hideEffect="clip" dynamic="true">
                    <h:panelGrid id="AddClientGrid" columns="2">

                        <p:outputLabel value="Client Surname:"/>
                        <p:inputText id="NewClientSurname" value="#{mainPage.newCustomer.surName}"/>

                        <p:outputLabel value="Client name:"/>
                        <p:inputText id="NewClientName" value="#{mainPage.newCustomer.name}"/>

                        <p:outputLabel value="Client's phone numb:"/>
                        <p:inputText id="NewClientPhone" value="#{mainPage.newCustomer.telNumber}"
                                     required="true"/>

                        <p:outputLabel value="Man or Woman:"/>
                        <p:inputSwitch id="newSex" value="#{mainPage.man}" offLabel="Woman" onLabel="Man"
                                       style="font-size: small">
                            <p:ajax oncomplete="#{mainPage.setClientMan()}"/>
                        </p:inputSwitch>

                        <p:commandButton type="reset" value="Reset" oncomplete="PF('addClientDialog').reset();"/>
                        <p:commandButton id="addNewClientButton" value="Save" actionListener="#{mainPage.addClient()}"
                                         oncomplete="PF('addClientDialog').hide(); PF('myschedule').update();"
                                         update=":form1:eventDetails"/>
                    </h:panelGrid>
                </p:dialog>
            </h:form>
            <script type="text/javascript">
                PrimeFaces.locales['rs'] = {
                    closeText: 'закрыть',
                    prevText: 'предыдущий',
                    nextText: 'следующий',
                    currentText: 'сегодня',
                    monthNames: ['Январь', 'Февраль', 'Mart', 'Апрель', 'Май', 'Июнь',
                        'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],
                    monthNamesShort: ['Янв', 'Февр', 'Март', 'Апр', 'Май', 'Июнь',
                        'Июль', 'Авг', 'Сент', 'Окт', 'Нбр', 'Декаб'],
                    dayNames: ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота', 'Воскресенье'],
                    dayNamesShort: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],
                    dayNamesMin: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],
                    weekHeader: 'Нед',
                    firstDay: 1,
                    isRTL: false,
                    showMonthAfterYear: false,
                    yearSuffix: '',
                    month: 'Месяц',
                    week: 'Неделя',
                    day: 'День',
                    allDayText: 'Весь день'
                };
            </script>
            <style type="text/css">
                .value {
                    width: 1000px;
                }
            </style>
        </p:layoutUnit>
    </p:layout>
</h:body>
</html>

